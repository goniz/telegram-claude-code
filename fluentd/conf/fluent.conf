<source>
  @type tail
  path /fluentd/log/*.log
  pos_file /var/log/fluentd/telegram-bot.log.pos
  tag telegram-bot.*
  <parse>
    @type none
  </parse>
</source>

<match telegram-bot.**>
  @type copy
  
  # Output to stdout for debugging
  <store>
    @type stdout
    output_type json
  </store>
  
  # Store in files organized by date
  <store>
    @type file
    path /var/log/fluentd/telegram-bot
    append true
    time_slice_format %Y%m%d
    time_slice_wait 10m
    time_format %Y%m%dT%H%M%S%z
    buffer_type file
    buffer_path /var/log/fluentd/telegram-bot.*.buffer
    flush_mode interval
    flush_interval 30s
    flush_at_shutdown true
  </store>
</match>